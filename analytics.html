<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Analytics — FareComparator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="analytics.css">
</head>
<body>
<div class="app-shell">
    <header class="app-nav">
        <div class="app-brand">
            <img src="logo.svg" alt="FareComparator Logo" class="app-logo" />
        </div>

        <button class="nav-toggle" id="navToggle">☰</button>

        <nav class="app-nav-links">
            <a href="compare.html">Compare</a>
            <a href="history.html">History</a>
            <a href="analytics.html" class="active">Analytics</a>
            <a href="contact.html">Contact Us</a>
            <button id="logoutBtn" class="logout-btn">Logout</button>
        </nav>
    </header>

    <div class="sidebar-menu" id="sidebarMenu">
        <div class="sidebar-header">
            <button class="close-btn" id="closeMenu">✕</button>
        </div>
        <div class="sidebar-links">
            <a href="index.html">Compare</a>
            <a href="history.html">History</a>
            <a href="analytics.html" class="active">Analytics</a>
            <a href="contact.html">Contact Us</a>
            <button id="logoutBtn" class="logout-btn">Logout</button>
        </div>
    </div>

    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <main class="app-main">
        <input type="hidden" id="analyticsUserId" value="" />

        <section class="card">
            <h1 class="card-title">Analytics Summary</h1>
            <div class="summary-grid">
                <div class="stat-card">
                    <div class="text-muted">Total Requests</div>
                    <div id="totalRequests">—</div>
                </div>
                <div class="stat-card">
                    <div class="text-muted">Average Savings (₹)</div>
                    <div id="avgSavings">—</div>
                </div>
                <div class="stat-card">
                    <div class="text-muted">Most Used Provider</div>
                    <div id="mostUsed">—</div>
                </div>
                <div class="stat-card">
                    <div class="text-muted">CO₂ Emitted</div>
                    <div id="summaryCo2">—</div>
                </div>
                <div class="stat-card">
                    <div class="text-muted">Distance Walked</div>
                    <div id="summaryWalked">—</div>
                </div>
                <div class="stat-card">
                    <div class="text-muted">Calories Burned</div>
                    <div id="summaryCalories">—</div>
                </div>
            </div>
        </section>

        <div class="charts-container">
            <section class="card">
                <h2 class="card-title">Provider-wise Savings Trend</h2>
                <div class="chart-wrapper">
                    <div class="loading-overlay" id="chartLoading">Loading…</div>
                    <canvas id="requestsChart"></canvas>
                </div>
                <div id="noDataMessage" style="display:none; padding:1.5rem; text-align:center; color:#666;">
                    No analytics data available yet.
                </div>
                <div class="text-muted small">
                    Cumulative savings (₹) achieved with each ride-hailing provider over time.
                </div>
            </section>

            <section class="card">
                <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;margin-bottom:1rem;">
                    <h2 class="card-title">Eco Impact (CO₂ Emission)</h2>
                    <select id="co2Range">
                        <option value="7">Last 7 days</option>
                        <option value="30">Last 30 days</option>
                    </select>
                </div>
                <div class="chart-wrapper">
                    <canvas id="co2Chart"></canvas>
                </div>
                <div class="text-muted small">
                    Daily CO₂ emissions from your rides.
                </div>
            </section>

            <section class="card">
                <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;margin-bottom:1rem;">
                    <h2 class="card-title">Walking & Health Contribution</h2>
                    <select id="walkRange">
                        <option value="day">Per Day</option>
                        <option value="week" selected>Last 7 Days</option>
                        <option value="month">Last 30 Days</option>
                    </select>
                </div>
                <div class="chart-wrapper">
                    <canvas id="walkChart"></canvas>
                </div>
                <div class="text-muted small">
                    Walking distance & calories burned from walking suggestions.
                </div>
            </section>

            <section class="card">
                <h2 class="card-title">Savings vs CO₂ Tradeoff</h2>
                <div class="chart-wrapper">
                    <canvas id="savingsCo2Chart"></canvas>
                </div>
                <div class="text-muted small">
                    Each dot = one trip: X = savings, Y = CO₂ emitted
                </div>
            </section>
        </div>
    </main>
</div>
    <script src="analytics.js"></script>
</body>
</html>

